{% macro audio(id, src) %}
        <audio preload="auto" id="{{ id }}" class="item_audio">
            <source src="{{ src }}.ogg" type="audio/ogg">
            <source src="{{ src }}.mp3" type="audio/mp3">
            Votre navigateur est trop ancien.
        </audio>
        <span sound="{{ id }}" statut="pause" class="item_audio_button glyphicon glyphicon-play"></span>
{% endmacro %}

{% macro inputs(type, subquestionId, propositionId, text) %}
    <label class="{{ type }}-inline">
        <input type="{{ type }}" name="subquestion{{ subquestionId }}" id="proposition{{ propositionId }}" value="{{ propositionId }}"> 
        {{ text }}
    </label>
{% endmacro %}

{% import _self as audio %}
{% import _self as inputs %}

{% extends '::base.html.twig' %}

{% block body -%}
    <div class="row">
        <div class="col-md-4">
            <h4>
                <span class="badge pull-left"> 1 </span>&nbsp;Contexte
            </h4>
            {{ audio("context", questionnaire.audioContext) }}
        </div>

        <div class="col-md-4">
            <h4>
                <span class="badge pull-left"> 2 </span>&nbsp;Situation
            </h4>
            {{ audio("situtation", questionnaire.audioItem) }}
        </div>
    </div>
    <hr />
    <div class="row">
        <div class="col-md-4">
             <h4>
                <span class="badge pull-left"> 3 </span>&nbsp;Consigne
            </h4>
            {{ audio("instruction", questionnaire.audioInstruction) }}
        </div>
        <div class="col-md-8">
            <form>
            {% for question in questionnaire.questions %}
                <h4><span class="badge pull-left"> 4 </span>&nbsp;Question {{ question.id }} {{ question.instruction }}</h4>
                {% for subquestion in question.subquestions %}
                    <h4> {{ subquestion.title }}</h4>
                    <p>
                    {% if subquestion.typology == "VF" %}
                        {{ audio("subquestion"+subquestion.id, subquestion.audioUrl) }}
                    {% endif %}

                    {% for proposition in subquestion.propositions %}
                        {% if subquestion.typology == "QRU" %}
                            <p>
                                {{ audio("proposition"+proposition.id, proposition.audioUrl) }}
                                {{ inputs("radio", subquestion.id, proposition.id, proposition.title) }}
                            </p>
                        {% elseif subquestion.typology == "QRM" %}
                            <p>
                                {{ audio("proposition"+proposition.id, proposition.audioUrl) }}
                                {{ inputs("checkbox", subquestion.id, proposition.id, proposition.title) }}
                            </p>
                        {% elseif subquestion.typology == "VF" %}
                            {{ inputs("radio", subquestion.id, proposition.id, proposition.title) }}
                        {% endif %}
                    {% endfor %}

                    </p>
                {% endfor %}
            {% endfor %}
            </form>
        </div>
    </div>
{% endblock %}
